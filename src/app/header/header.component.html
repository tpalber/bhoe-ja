<mat-toolbar color="primary" style="height: 57px;">
  <img
    src="../favicon.ico"
    alt="bhoe-ja"
    [width]="isSmallScreen ? 60 : 75"
    style="cursor: pointer; object-fit: contain;"
    [ngClass]="{ 'margin-left-5': !isSmallScreen }"
    (click)="navigateToHome()"
  />
  <span
    (click)="navigateToHome()"
    style="margin-left: 0.5rem; margin-right: 2rem; cursor: pointer;"
    >{{ title }}</span
  >
  <span style="margin-left: 2rem; font-weight: normal;" *ngIf="!isSmallScreen"
    >All the latest Tibetan news in one place</span
  >
  <div fxFlex fxLayout="row" fxLayoutAlign="flex-end">
    <button mat-icon-button (click)="navigateToBookmark()">
      <ng-container *ngIf="bookmarkCount > 0; else elseBookmarkTemplate">
        <mat-icon [matBadge]="bookmarkCount" matBadgeColor="warn">
          bookmark
        </mat-icon>
      </ng-container>
      <ng-template #elseBookmarkTemplate>
        <mat-icon>
          bookmark
        </mat-icon>
      </ng-template>
    </button>
    <button mat-icon-button (click)="openFilterPanel()">
      <mat-icon>filter_alt</mat-icon>
    </button>
    <button mat-icon-button (click)="openAboutSheet()">
      <mat-icon>contact_support</mat-icon>
    </button>
  </div>
</mat-toolbar>
<ng-container *ngIf="tabEnabled">
  <mat-tab-group
    mat-align-tabs="center"
    [ngClass]="[isDarkMode ? 'dark-background' : 'light-background']"
    [selectedIndex]="tabIndex"
    (selectedIndexChange)="feedTypeSelected($event)"
  >
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon style="margin-right: 0.5rem;" *ngIf="!isSmallScreen">
          article
        </mat-icon>
        {{ isSmallScreen ? "Tibetan" : "Tibetan Articles" }}
      </ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon style="margin-right: 0.5rem;" *ngIf="!isSmallScreen">
          article
        </mat-icon>
        {{ isSmallScreen ? "English" : "English Articles" }}
      </ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon style="margin-right: 0.5rem;" *ngIf="!isSmallScreen">
          video_library
        </mat-icon>
        Videos
      </ng-template>
    </mat-tab>
  </mat-tab-group>
</ng-container>

<mat-expansion-panel [expanded]="filterPanel">
  <div fxFlex fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-evenly">
    <mat-form-field
      appearance="standard"
      ngClass="width-300px"
      ngClass.xs="width-100"
    >
      <mat-label>Filter By Date Range</mat-label>
      <mat-date-range-input
        [formGroup]="filterForm"
        [rangePicker]="picker"
        [max]="currentDate"
      >
        <input matStartDate formControlName="start" placeholder="Start date" />
        <input matEndDate formControlName="end" placeholder="End date" />
      </mat-date-range-input>
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker #picker disabled="false"></mat-date-range-picker>
    </mat-form-field>
    <mat-form-field
      appearance="standard"
      ngClass="width-300px"
      ngClass.xs="width-100"
    >
      <input
        matInput
        [formControl]="searchForm"
        placeholder="Filter By Title"
      />
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
    <mat-form-field
      appearance="standard"
      ngClass="width-300px"
      ngClass.xs="width-100"
    >
      <mat-label>Filter By News Source</mat-label>
      <mat-select [formControl]="sourcesForm" multiple>
        <mat-select-trigger>
          {{ sourcesForm.value ? sourcesForm.value[0] : "" }}
          <span
            *ngIf="sourcesForm.value?.length > 1"
            class="example-additional-selection"
          >
            (+{{ sourcesForm.value.length - 1 }}
            {{ sourcesForm.value?.length === 2 ? "other" : "others" }})
          </span>
        </mat-select-trigger>
        <mat-optgroup label="Articles">
          <mat-option *ngFor="let source of articleSourceList" [value]="source">
            {{ source }}
          </mat-option>
        </mat-optgroup>
        <mat-optgroup label="Videos">
          <mat-option *ngFor="let source of videoSourceList" [value]="source">
            {{ source }}
          </mat-option>
        </mat-optgroup>
      </mat-select>
    </mat-form-field>
  </div>
</mat-expansion-panel>
